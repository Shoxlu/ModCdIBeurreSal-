#include "main.tecl"
//God Reimu
void BossItemCard();

void BossItemPhase(var A, var B, var C);

void EffChargePoint2(var A, var B, var C, var D, var E);

void BossAlt()
{
    setBoss(0);
    setInvuln(120);
    flagSet(3);
    $CAPTURE = 1;
    movePos(0.0f, 128.0f);
    @EffChargePoint2(1.5707964f, -1.0471976f, 8, 2, 6);
    @EffChargePoint2(1.5707964f, 1.0471976f, 10, 7, 3);
    wait(101);
    anmSelect(4);
    anmSetMain(0, 0);
    flagClear(3);
    flagSet(64);
    lifeSet(23000);
    anmSetSprite(0, 0);
    dialogWait();
	playSound(63);
    setChapter(43);
+1: //1
	enmCreateA("enameGR", 0f, -6f, 100, 100, 0);
    setHurtbox(56.0f, 56.0f);
    setHitbox(50.0f, 50.0f);
    moveLimit(0.0f, 128.0f, 280.0f, 48.0f);
    anmSelect(1);
    anmSetSprite(1, 107);
    anmSetSprite(2, 116);
    anmSelect(4);
    fog(160.0f, 16728128);
    unless ($SPELL_ID >= 0) goto Boss_1200 @ 1;
    unless (($SPELL_ID >= 2) && ($SPELL_ID <= 5)) goto Boss_996 @ 1;
    lifeSet(4000);
    @BossCardAlt1();
    goto Boss_1200 @ 1;
Boss_996:
    unless (($SPELL_ID >= 6) && ($SPELL_ID <= 9)) goto Boss_1200 @ 1;
    lifeSet(2600);
    @BossCardAlt2();
Boss_1200:
    debug22(3, "Boss7");
	lifeSet(12800);
    @BossAlt7();
    delete();
}

void BossAlt1()
{
    timerReset();
    setNext(0, 3000, 2400, "BossCardAlt1");
    lifeMarker(0, 3000.0f, -24448);
    stars(6);
    moveLimit(0.0f, 128.0f, 280.0f, 8.0f);
    anmSelect(4);
    anmSetMain(0, 0);
    anmPlay(1, 75);
    playSound(54);
    wait(60);
    anmPlay(1, 86);
    playSound(6);
	@Move() async;
    @BossAlt1_at() async;
	@BossAlt1_at1();
}

void Move()
{
	wait(200);
	while(1){
		moveRand(60, 0, 3f);
		wait(100);
	}
}

void BossAlt1_at()
{
	etNew(0);
	etSprite(0, 11, 15);
	etAim(0, 5);
	etCount(0, 15, 1);
	etAngle(0, rad(90), 0f);
	etSpeed(0, 4f, 4f);
	while(1)
	{
		etOn(0);
		wait(12:10:7:5);
	}
}
void BossAlt1_at1()
{
	etNew(1);
	etSprite(1, 11, 8);
	etAim(1, 2);
	etCount(1, 30, 1);
	etAngle(1, 0f, 0f);
	etSpeed(1, 1f, 1f);
	etExSet(1, 0, 0, EX_WAIT, 60, NEG, NEGF, NEGF);
	etExSet(1, 1, 0, EX_VELTIME, 30, NEG, 6f, NEGF);
	etCopy(2, 1);
	etSprite(2, 11, 2);
	etAim(2, 4);
	while(1)
	{
		etOn(1);
		@SoundEffect() async;
!HL
		wait(20);
		etOn(2);
		@SoundEffect() async;
!*
		wait(35:30:25:15);
	}
}

void SoundEffect()
{
	wait(60);
	playSound(38);
}

void BossAlt2()
{
    setInvuln(120);
    lifeSet(19600);
    unless ($TIMEOUT == 0) goto Boss2_200 @ 0;
    etCancel(640.0f);
    goto Boss2_220 @ 0;
Boss2_200:
    etClear(640.0f);
Boss2_220:
+2: //2
    setChapter(44);
+2: //4
    ins_569(5);
    stars(5);
    flagClear(3);
    @BossItemPhase(60, 20, 64.0f);
    timerReset();
    killAllAsync();
    enmKillAll();
    unless ($TIMEOUT == 0) goto Boss2_532 @ 4;
    etCancel(640.0f);
    goto Boss2_552 @ 4;
Boss2_532:
    etClear(640.0f);
Boss2_552:
    spellEnd();
    funcSet(0);
    reset();
    playSound(27);
    moveVel(0.0f, 0.0f);
    moveVelTime(0, 0, 0.0f, 0.0f);
    movePosTime(0, 0, 0.0f, 0.0f);
    $MISS_COUNT = 0;
    $BOMB_COUNT = 0;
    $CAPTURE = 1;
    setNext(0, 2600, 2520, "BossCardAlt2");
    lifeMarker(0, 2600.0f, -24448);
    anmSelect(4);
    anmSetMain(0, 0);
    moveLimit(0.0f, 128.0f, 240.0f, 32.0f);
	movePosTime(60, 0, 0.0f, 118.0f);
    wait(120);
    anmPlay(1, 75);
    playSound(54);
    wait(60);
    anmPlay(1, 86);
    playSound(6);
Boss2_1168:
	BossAlt2_at(0, 1f, 0f, 8, 32, 1) async;
    BossAlt2_at(1, -1f, rad(90), 8, 32, 1) async; 
	BossAlt2_at(5, 1f, 0f, 8, 33, 4) async;
    BossAlt2_at(6, -1f, rad(90), 8, 33, 4) async;
!HL
    BossAlt2_2() async;
!*	
    BossAlt2_3();
    return;
}

void BossAlt2_at(int etID,float B, float A, int color, int sprite, int color2)
{
    etNew(etID);
    etAim(etID, 3);
    etCount(etID, 4, 1);
    etAngle(etID, A, 0f);
    etSprite(etID, 11, color);
!EHL
    etSpeed(etID, 2f, 2f);
!N
    etSpeed(etID, 3f, 4f);
!*
    etExSet(etID, 0, 0, EX_WAIT, 30, NEG, NEGF, NEGF);
    etExSet(etID, 1, 0, EX_SETSPRITE, sprite, color2, NEGF, NEGF);
    while(1){
		etOn(etID);
		A = A +(rad(13.5f)*B);
		etAngle(etID, A, 0f);
		wait(10);
    }
}

void BossAlt2_2()
{
    etNew(3);
    etAim(3, 1);
    etCount(3, 5:5:5:7, 1);
    etAngle(3, rad(90), rad(20));
    etSprite(3, 12, 0);
    etSpeed(3, 1f, 1f);
    
    etExSet(3, 0, 0, EX_WAIT, 90, NEG, NEGF, NEGF);
    etExSet(3, 1, 0, EX_VEL, NEG, NEG, NEGF, 5f);
    etExSet2(3, 2, 0, EX_ANGLE, 30, 1, 1, NEG, 0f, 0f:0f:3f:5f, NEGF, NEGF);
    
    while(1){
		etOn(3);
		wait(90);
    }
}

void BossAlt2_3()
{
    etNew(2);
    etAim(2, 2);
    etCount(2, 20, 1);
    etAngle(2, rad(90), 0f);
    etSprite(2, 20, 6);
    etSpeed(2, 2f, 3f);
    
    while(1){
		etOn(2);
		wait(35:20:20:20);
    }
}

void BossAlt3()
{
    lifeSet(21000);
    unless ($TIMEOUT == 0) goto Boss3_180 @ 0;
    etCancel(640.0f);
    goto Boss3_200 @ 0;
Boss3_180:
    etClear(640.0f);
Boss3_200:
+2: //2
    setChapter(45);
+2: //4
    ins_569(4);
    stars(4);
    moveLimit(0.0f, 128.0f, 280.0f, 40.0f);
    @BossItemPhase(60, 30, 64.0f);
    timerReset();
    killAllAsync();
    enmKillAll();
    unless ($TIMEOUT == 0) goto Boss3_524 @ 4;
    etCancel(640.0f);
    goto Boss3_544 @ 4;
Boss3_524:
    etClear(640.0f);
Boss3_544:
    spellEnd();
    funcSet(0);
    reset();
    playSound(27);
    moveVel(0.0f, 0.0f);
    moveVelTime(0, 0, 0.0f, 0.0f);
    movePosTime(0, 0, 0.0f, 0.0f);
    $MISS_COUNT = 0;
    $BOMB_COUNT = 0;
    $CAPTURE = 1;
    anmSelect(4);
    anmSetMain(0, 0);
    setNext(0, 4000, 2820, "BossCardAlt3");
    lifeMarker(0, 4000.0f, -24448);
    movePosTime(60, 4, 0.0f, 128.0f);
    anmPlay(1, 75);
    playSound(54);
    wait(30);
    anmPlay(1, 73);
    playSound(54);
    wait(50);
    anmPlay(1, 86);
    playSound(6);
    anmSelect(4);
    anmSetSprite(3, 6);
	while(1)
	{
		@BossAlt3_at()async;
		@BossAlt3_atAim();
		moveRand(60, 1, 4f);
		wait(60);
	}
}

void BossAlt3_at()
{
    etNew(0);
    etAim(0, 6);
	etSprite(0, 0, 0);
    etCount(0, 30, 1);
    etSpeed(0, 6f, 6f);
	etAngle(0, -rad(90), rad(162):rad(164):rad(166):rad(168));
	etEx(0, 0, EX_ANIM, 1, NEG, NEGF, NEGF);
	times(60)
	{
		etOn(0);
		wait(3);
	}
}

void BossAlt3_atAim()
{
    etNew(1);
    etAim(1, 0);
    etCount(1, 1, 5:6:5:6);
    etSpeed(1, 5f, 2f);
	etEx(1, 0, EX_ANIM, 3, NEG, NEGF, NEGF);
	times(3:3:6:6)
	{
		etSprite(1, 11, 8);
		etOffset(1, RANDF2*30f, RANDF2*30f);
		playSound(22);
		etOn(1);
		wait(30:30:15:15);
		etSprite(1, 11, 13);
		etOffset(1, RANDF2*30f, RANDF2*30f);
		playSound(22);
		etOn(1);
		wait(30:30:15:15);
	}
}

void BossAlt4()
{
    lifeSet(20700);
    unless ($TIMEOUT == 0) goto Boss4_180 @ 0;
    etCancel(640.0f);
    goto Boss4_200 @ 0;
Boss4_180:
    etClear(640.0f);
Boss4_200:
    anmSwitch(3, 1);
+2: //2
    setChapter(46);
+2: //4
    ins_569(3);
    stars(3);
    moveLimit(0.0f, 128.0f, 280.0f, 64.0f);
    @BossItemPhase(60, 30, 64.0f);
    timerReset();
    killAllAsync();
    enmKillAll();
    unless ($TIMEOUT == 0) goto Boss4_548 @ 4;
    etCancel(640.0f);
    goto Boss4_568 @ 4;
Boss4_548:
    etClear(640.0f);
Boss4_568:
    spellEnd();
    funcSet(0);
    reset();
    playSound(27);
    moveVel(0.0f, 0.0f);
    moveVelTime(0, 0, 0.0f, 0.0f);
    movePosTime(0, 0, 0.0f, 0.0f);
    $MISS_COUNT = 0;
    $BOMB_COUNT = 0;
    $CAPTURE = 1;
    anmSelect(4);
    anmSetMain(0, 0);
    setNext(0, 3700, 3300, "BossCardAlt4");
    lifeMarker(0, 3700.0f, -24448);
    movePosTime(60, 4, 0.0f, 128.0f);
    anmPlay(1, 75);
    playSound(54);
    wait(30);
    anmPlay(1, 73);
    playSound(54);
    wait(50);
    anmPlay(1, 86);
    playSound(6);
    anmSelect(4);
    anmSetSprite(3, 6);
    @BossAlt4_pos()async;
	wait(60);
	@SaltBlock();
}

void BossAlt4_at()
{
	float radn = RANDRAD;
    etNew(0);
    etAim(0, 3);
	etSpeed(0, 6f, 1f);
	etExSet(0, 0, 0, EX_ANIM, 0, NEG, NEGF, NEGF); 	
	etExSet(0, 1, 0, EX_VELTIME, 30, NEG, 0f, NEGF);
	etExSet(0, 2, 0, EX_WAIT, 30, NEG, NEGF, NEGF);
	etSprite(0, 13, 8);
    etCount(0, 3, 12:20:24:30);
    etAngle(0, radn, rad(10):rad(6):rad(5):rad(4));
	etExSet(0, 3, 0, EX_ANGLE_ACCEL, 1, NEG, 2.5f, rad(80));
    etOn(0);
	wait(15);
	etSprite(0, 13, 13);
    etCount(0, 3, 12:20:24:30);
    etAngle(0, radn, -rad(10):-rad(6):-rad(5):-rad(4));
	etExSet(0, 3, 0, EX_ANGLE_ACCEL, 1, NEG, 2.5f, -rad(80));
    etOn(0);
}

void BossAlt4_pos()
{
    while(1)
	{
		@BossAlt4_at()async;
		wait(60);
		moveRand(30, 1, 2f);
		wait(30);
	}
}

void SaltBlock()
{
	etNew(1);
	etAim(1, 7);
	etSound(1, -1, -1);
	etSprite(1, 0, 0);
	etCount(1, 15, 10);
	etSpeed(1, 0f, 5f);
	etExSet(1, 0, 0, EX_OFFSCREEN, 500, NEG, NEGF, NEGF);
	etExSet(1, 1, 0, EX_WAIT, 4, NEG, NEGF, NEGF);
	while(1)
	{
	etAngle(1, RANDRAD, RANDRAD);
	etExSet(1, 2, 0, EX_VEL, NEG, NEG, rad(90)+RANDF2*rad(5), 3.5f:4f:4.5f:5f);
	etOffsetAbs(1, RANDF2*192f, -100f+RANDF*20f);
	etOn(1);
	wait(18:15:12:9);
	}
}

void BossAlt5()
{
    lifeSet(7000);
    setInvuln(180);
    unless ($TIMEOUT == 0) goto Boss5_200 @ 0;
    etCancel(640.0f);
    goto Boss5_220 @ 0;
Boss5_200:
    etClear(640.0f);
Boss5_220:
    anmSwitch(3, 1);
+2: //2
    setChapter(47);
+2: //4
    ins_569(2);
    stars(2);
    moveLimit(0.0f, 128.0f, 280.0f, 96.0f);
    @BossItemPhase(60, 30, 64.0f);
    timerReset();
    killAllAsync();
    enmKillAll();
    unless ($TIMEOUT == 0) goto Boss5_568 @ 4;
    etCancel(640.0f);
    goto Boss5_588 @ 4;
Boss5_568:
    etClear(640.0f);
Boss5_588:
    spellEnd();
    funcSet(0);
    reset();
    playSound(27);
    moveVel(0.0f, 0.0f);
    moveVelTime(0, 0, 0.0f, 0.0f);
    movePosTime(0, 0, 0.0f, 0.0f);
    $MISS_COUNT = 0;
    $BOMB_COUNT = 0;
    $CAPTURE = 1;
    anmSelect(4);
    anmSetMain(0, 0);
    wait(160);
    @BossCardAlt5();
    return;
}

void BossAlt6()
{
    lifeSet(6000);
    setInvuln(180);
    unless ($TIMEOUT == 0) goto Boss6_200 @ 0;
    etCancel(640.0f);
    goto Boss6_220 @ 0;
Boss6_200:
    etClear(640.0f);
Boss6_220:
+2: //2
    setChapter(48);
+2: //4
    ins_569(1);
    stars(1);
    moveLimit(0.0f, 128.0f, 280.0f, 96.0f);
    @BossItemPhase(60, 30, 64.0f);
    timerReset();
    killAllAsync();
    enmKillAll();
    unless ($TIMEOUT == 0) goto Boss6_544 @ 4;
    etCancel(640.0f);
    goto Boss6_564 @ 4;
Boss6_544:
    etClear(640.0f);
Boss6_564:
    spellEnd();
    funcSet(0);
    reset();
    playSound(27);
    moveVel(0.0f, 0.0f);
    moveVelTime(0, 0, 0.0f, 0.0f);
    movePosTime(0, 0, 0.0f, 0.0f);
    $MISS_COUNT = 0;
    $BOMB_COUNT = 0;
    $CAPTURE = 1;
    anmSelect(4);
    anmSetMain(0, 0);
    wait(160);
    @BossCardAlt6();
    return;
}

void BossAlt7()
{
    flagClear(3);
    lifeSet(8000);
    setInvuln(180);
    unless ($TIMEOUT == 0) goto Boss7_220 @ 0;
    etCancel(640.0f);
    goto Boss7_240 @ 0;
Boss7_220:
    etClear(640.0f);
Boss7_240:
    anmSelect(4);
    anmSetMain(0, 0);
+2: //2
    setChapter(49);
+2: //4
    ins_569(1);
    stars(0);
    moveLimit(0.0f, 128.0f, 280.0f, 96.0f);
    unless ($TIMEOUT == 0) goto Boss7_580 @ 4;
    dropClear();
    dropMain(3);
    dropExtra(1, 100);
    dropExtra(2, 100);
    dropArea(80.0f, 80.0f);
    dropItems();
Boss7_580:
    timerReset();
    killAllAsync();
    enmKillAll();
    unless ($TIMEOUT == 0) goto Boss7_752 @ 4;
    etCancel(640.0f);
    goto Boss7_772 @ 4;
Boss7_752:
    etClear(640.0f);
Boss7_772:
    spellEnd();
    funcSet(0);
    reset();
    playSound(27);
    moveVel(0.0f, 0.0f);
    moveVelTime(0, 0, 0.0f, 0.0f);
    movePosTime(0, 0, 0.0f, 0.0f);
    $MISS_COUNT = 0;
    $BOMB_COUNT = 0;
    $CAPTURE = 1;
    anmSelect(4);
    anmSetMain(0, 0);
    wait(80);
    anmPlay(1, 75);
    playSound(54);
    wait(30);
    anmPlay(1, 73);
    playSound(54);
    wait(50);
    anmPlay(1, 86);
    playSound(6);
    anmSelect(4);
    anmSetSprite(3, 6);
    //@BossAlt4_pos() async;
    @BossCardAlt7();
    return;
}

void BossCardAlt5()
{
    var A, B, C, D, E, F, G, H;
    unless ($TIMEOUT == 0) goto BossCard1_160 @ 0;
    etCancel(640.0f);
    goto BossCard1_180 @ 0;
BossCard1_160:
    etClear(640.0f);
BossCard1_180:
+2: //2
    setChapter(63);
+2: //4
    ins_569(1);
    @BossItemCard();
    timerReset();
    killAllAsync();
    enmKillAll();
    unless ($TIMEOUT == 0) goto BossCard1_428 @ 4;
    etCancel(640.0f);
    goto BossCard1_448 @ 4;
BossCard1_428:
    etClear(640.0f);
BossCard1_448:
    spellEnd();
    funcSet(0);
    reset();
    playSound(27);
    moveVel(0.0f, 0.0f);
    moveVelTime(0, 0, 0.0f, 0.0f);
    movePosTime(0, 0, 0.0f, 0.0f);
	lifeMarker(0, 0.0f, -24448);
    $MISS_COUNT = 0;
    $BOMB_COUNT = 0;
    $CAPTURE = 1;
    setNext(0, 0, 4300, "BossAlt6");
    spell(94, 4300, 500000, "AutoritÃ© Divine Â«Grand Ordre du Beurre SalÃ©Â»");
	anmPlayAbs(4, 27);
    movePosTime(60, 4, 0.0f, 198.0f);
    moveLimit(0.0f, 128.0f, 240.0f, 224.0f);
    anmPlay(1, 79);
    anmPlay(1, 75);
    playSound(54);
+90: //94
    nop();
    wait(60);
	@BossCardalt5_at();
}

void BossCardalt5_at()
{
	etNew(0);
	etAim(0, 1);
	etCount(0, 1, 1);
	etSpeed(0, 2f, 2f);
	etSprite(0, 32, 3);
	etExSet(0, 1, 0, EX_WAIT, 70, NEG, NEGF, NEGF);
	etExSet(0, 0, 0, EX_INVULN, 10000, NEG, NEGF, NEGF);
	etExSet(0, 2, 0, EX_VEL, NEG, NEG, 0f, 0f);
	etExSet(0, 3, 0, EX_WAIT, 620, NEG, NEGF, NEGF);
	etExSet(0, 4, 0, EX_DELETE, 0, NEG, NEGF, NEGF);
	etCopy(2, 0);
	etSprite(2, 33, 6);
	// %A = RANDRAD;
	float angle = rad(270);
	int wait_sub = 0;
	while(1)
	{
		BossCard5_at2(angle) async;
		angle+=rad(60);
		wait(70+180);
		//GF1 += 20f;
	}
}

void BossCard5_at2(float angle_base){
	// times(9)
	// {
		// etAngle(0, angle_base, 0f);
		// etAngle(2, angle_base, 0f);
		// etOn(0);
		// etOn(2);
		// wait(20);
		// angle_base += rad(40);
		
	// }
	wait(60);
	F0 = rad(0)+angle_base;
	enmCreateA("Lignes", 0f, 0f, 1, 1000, 1);
	F0 = angle_base+rad(-120);
	enmCreateA("Lignes", 0f, 0f, 1, 1000, 1);
	F0 = angle_base+rad(-120)*2f;
	enmCreateA("Lignes", 0f, 0f, 1, 1000, 1);

}

void Lignes()
{
	flagSet(3);
	flagSet(8);
	flagSet(4);
	int wait1 = 5:4:4:4;
	int wait2 = 220:150:120:120;
	float Speed = 4f:4f:4f:4f;
	float angle = -rad(180)+RANDRAD;
	float angl2 = rad(1.75):rad(1.75):rad(2.00):rad(2.50);
	int count1 = 4;
	etNew(1);
	etAim(1, 1);
	etCount(1, 1, 1);
	etSpeed(1, 0f, 0f);
	etSprite(1, 11, 13);
	etExSet(1, 0, 0, EX_INVULN, 750, NEG, NEGF, NEGF);
	etExSet(1, 2, 0, EX_VELTIME, 60, 0, 3f, NEGF);
	int duration = 100;
	move(100) async;
	movePos(BOSS_X, BOSS_Y);
	int time = 0;

	while(time < duration)
	{
		
		// etExSet(1, 1, 0, EX_WAIT, 320, NEG, NEGF, NEGF);
		// etExSet(1, 2, 0, EX_VELTIME, 60, 0, Speed - 2f, NEGF);
		// shoot_fan(angl2, count1);
		// check_for_deletion();
		// wait(wait1);
		etSprite(1, 11, 8);
		etExSet(1, 1, 0, EX_WAIT, wait2+160, NEG, NEGF, NEGF);
		etExSet(1, 2, 0, EX_VELTIME, 60, 0, Speed - 2f, NEGF);
		shoot_fan(angle, angl2, count1);
		check_for_deletion();
		//wait(wait1);
		etSprite(1, 11, 15);
		etExSet(1, 1, 0, EX_WAIT, wait2+240, NEG, NEGF, NEGF);
		etExSet(1, 2, 0, EX_VELTIME, 60, 0, Speed - 3.5f, NEGF);
		shoot_fan(angle, angl2, count1);
		check_for_deletion();
		wait(wait1);
		time += wait1;
		angle+=rad(137.5);

	}

}

void shoot_fan(float angle, float angl2, int count1){
	int color = 0;
	float angle_to_center;
	mathAngle(angle_to_center, ABS_X, ABS_Y, 0f, 198f);
	float bullet_angle = angle_to_center - angl2 * 1.5f;
	times(count1)
	{
		etAngle(1,angle+bullet_angle, 0f);
		//etSprite(1, 11, 13+color);
		etOn(1); 
		bullet_angle +=angl2;

		color = (color+1)%2;
	}
}

void check_for_deletion(){
	if(GI0 == 2)
	{
		delete();
	}
	return;
}

// void move()
// {
	// int move_duration = 40;
	// float base_angle = GF1;
	// float angle = base_angle;
	// angle = base_angle+rad(80)*F0;
	// move_to_point_circle(angle, 140f, move_duration);
	// angle = base_angle+rad(160)*F0;
	// move_to_point_circle(angle, 140f, move_duration);
	// angle = base_angle+rad(160)*-F0;
	// move_to_point_circle(angle, 140f, move_duration);
	// angle = base_angle+rad(40)*F0;
	// move_to_point_circle(angle, 140f, move_duration*2);
	// angle = base_angle+rad(120)*-F0;
	// move_to_point_circle(angle, 140f, move_duration*2);
	// angle=base_angle+rad(120)*F0;
	// move_to_point_circle(angle, 140f, move_duration);
	// angle = base_angle+rad(140)*F0;
	// move_to_point_circle(angle, 140f, move_duration);
	// GI0 = 2;
// }


void move(int duration){
	//move_to_point_circle(F0, 140f, 40);
	// moveVel(F0, 1.6f*1.8f);
	//moveVel(F0, 2f);
	// moveVelTime(120, 0, rad(-180)+rad(-360)+F0, 0.5f);
	// //moveAngleTime(360, 0, rad(90)+F0);
	// wait(120);
	// moveVel( rad(-180)+rad(-360)+F0, 1.6f*1.8f);
	// moveVelTime(120, 0, rad(-180)+rad(-360)*2f+F0, 0.5f);
	//moveAngleTime(360, 0, rad(90)+F0);
	float radius = 80f;
	float center_x = BOSS_X+cos(F0)*radius;
	float center_y = BOSS_Y+sin(F0)*radius;
	//enmCreateA("Test", center_x, center_y, 100, 1, 0);
	
	float angle= 0f;
	mathAngle(angle, center_x, center_y, BOSS_X, BOSS_Y);
	float x = cos(angle)*radius;
	float y = sin(angle)*radius;
	movePos(center_x+x, center_y+y);
	int waittime = 3;
	int time = duration/waittime;
	times(time){
		movePos(center_x+x, center_y+y);
		x = cos(angle)*radius;
		y = sin(angle)*radius;
		angle -= rad(2)*(200f/_f(time));//(rad(2)*200f*(200/100)
		radius += -100f*120f/140f/_f(time);
		//speed -=1f/360f;
		wait(waittime);
	}
	GI0=2;
}

void Test(){
	etNew(0);
	etSpeed(0, 0f, 0f);
	etOn(0);
}

void move_to_point_circle(float angle, float radius, int move_duration){
	movePosTime(move_duration, 1, BOSS_X + cos(angle)* radius, BOSS_Y + sin(angle) * radius);
	wait(move_duration);
}


void Explosion()
{
	etNew(1);
	etAim(1, 7);
	etCount(1, 14, 13);
	etAngle(1, rad(90), rad(24));
	etSpeed(1, 1f, 2f);
	etSprite(1, 8, 1 + RAND % 15);
	etOn(1);
}	

void BossCardAlt2()
{
    var A, B, C, D;
    unless ($TIMEOUT == 0) goto BossCard2_160 @ 0;
    etCancel(640.0f);
    goto BossCard2_180 @ 0;
BossCard2_160:
    etClear(640.0f);
BossCard2_180:
+2: //2
    setChapter(63);
+2: //4
    ins_569(1);
    @BossItemCard();
    timerReset();
    killAllAsync();
    enmKillAll();
    unless ($TIMEOUT == 0) goto BossCard2_428 @ 4;
    etCancel(640.0f);
    goto BossCard2_448 @ 4;
BossCard2_428:
    etClear(640.0f);
BossCard2_448:
    spellEnd();
    funcSet(0);
    reset();
    playSound(27);
    moveVel(0.0f, 0.0f);
    moveVelTime(0, 0, 0.0f, 0.0f);
    movePosTime(0, 0, 0.0f, 0.0f);
    $MISS_COUNT = 0;
    $BOMB_COUNT = 0;
    $CAPTURE = 1;
    setNext(0, 0, 3300, "BossAlt3");
    spell(82, 3300, 500000, "2");
    movePosTime(60, 4, 0.0f, 128.0f);
    anm316(0, 0);
    anmPlay(1, 73);
+90: //94
    nop();
    moveLimit(0.0f, 128.0f, 240.0f, 16.0f);
    BossCardAlt2_at();
	wait(10000);
}

void BossCardAlt2_at()
{

}

void BossCardAlt3()
{
    var A, B;
    unless ($TIMEOUT == 0) goto BossCard3_160 @ 0;
    etCancel(640.0f);
    goto BossCard3_180 @ 0;
BossCard3_160:
    etClear(640.0f);
BossCard3_180:
+2: //2
    setChapter(64);
+2: //4
    ins_569(1);
    @BossItemCard();
    timerReset();
    killAllAsync();
    enmKillAll();
    unless ($TIMEOUT == 0) goto BossCard3_428 @ 4;
    etCancel(640.0f);
    goto BossCard3_448 @ 4;
BossCard3_428:
    etClear(640.0f);
BossCard3_448:
    spellEnd();
    funcSet(0);
    reset();
    playSound(27);
    moveVel(0.0f, 0.0f);
    moveVelTime(0, 0, 0.0f, 0.0f);
    movePosTime(0, 0, 0.0f, 0.0f);
    $MISS_COUNT = 0;
    $BOMB_COUNT = 0;
    $CAPTURE = 1;
    setNext(0, 0, 3600, "BossAlt4");
    spell(86, 3600, 500000, "3");
    movePosTime(60, 4, 0.0f, 144.0f);
    moveLimit(0.0f, 144.0f, 240.0f, 64.0f);
    anmSelect(4);
    anm316(0, 0);
	wait(60);
	@ring()async;
	@sakouya();
}

void sakouya()
{
	int T = 30*12+10;
	int V = 0;
	!E
	V = 20;
	!N
	V = 18;
	!H 
	V = 15;
	!L
	V = 15;
	!*
    etNew(0);
    etAim(0, 3);
    etSprite(0, 21, 4);
    etCount(0, 3, 1:1:2:3);
    etSpeed(0, 2.4f, 1.8f);
	etExSet(0, 0, 0, EX_ANIM, 0, NEG, NEGF, NEGF);
	etExSet(0, 2, 0, EX_SPECIAL, NEG, NEG, NEGF, NEGF);
	etExSub(0, 2, "couto");
	while(1)
	{
		T = 20+10*V;
		times(10)
		{
			etAngle(0, RANDRAD, 0f);
			etExSet(0, 1, 0, EX_WAIT, T, NEG, NEGF, NEGF);
			etOn(0);
			T = T-V;
			wait(V);
		}
	}
}

void couto()
{
	float A = 0f;
	flagSet(32);
    etNew(1);
    etAim(1, 1);
    etSprite(1, 21, 6);
    etCount(1, 1, 1);
    etSpeed(1, 1.5f, 1.5f);
	etAngle(1, rad(90)+RANDF2*rad(5), 0f);
	etOn(1);
}

void ring()
{
    etNew(2);
	etSound(2, -1, -1);
    etAim(2, 3);
    etSprite(2, 12, 15);
    etCount(2, 20, 1);
	etSpeed(2, 3f, 3f);
	etExSet(2, 0, 0, EX_ANIM, 0, NEG, NEGF, NEGF); 
	while(1)
	{
	wait(50);
	etAngle(2, RANDRAD, 0f);
	etOn(2);
	}
}

void BossCardAlt3_at4()
{
    var A, B, C, D, E, F;
    etNew(3);
    etAim(3, 3);
    etSprite(3, 28, 0);
    etCount(3, 1, 1);
    etAngle(3, 3.1415927f, 0.034906585f);
    etSpeed(3, 0.2f, 1.0f);
    etEx(3, 0, 2, 1, -999999, -999999.0f, -999999.0f);
    etEx(3, 0, 1048576, 0, -999999, -999999.0f, -999999.0f);
    etEx(3, 0, -2147483648, 200, -999999, -999999.0f, -999999.0f);
    etEx(3, 0, 2097152, 120, -999999, 1.4f, -999999.0f);
    %B = _f(192);
    %C = _f(192);
    %D = _f(224) + (_f(48) * %F0);
    $E = 16;
    goto BossCard3_at4_1388 @ 0;
BossCard3_at4_624:
    $F = 8;
    goto BossCard3_at4_1080 @ 0;
BossCard3_at4_688:
    %A = (%C * %RANDF2) + %D;
    etAngle(3, 1.5707964f + (%RANDF2 * 0.17453292f), 0.0f);
    etOffsetAbs(3, %B + (%RANDF2 * 0.15707964f), %A);
    etOn(3);
    wait(1);
BossCard3_at4_1080:
    if ($F--) goto BossCard3_at4_688 @ 0;
    %C = %C - _f(12);
    %D = %D - (_f(16) * %F0);
    %B = %B - _f(18);
BossCard3_at4_1388:
    if ($E--) goto BossCard3_at4_624 @ 0;
    return;
}

void BossCardAlt3_at5(var A, var B, var C, var D, var E, var F)
{
    var G, H, I, J, K;
    etNew($A);
    etAim($A, 3);
    etSprite($A, $B, 0);
    etCount($A, 1, 1);
    etAngle($A, 3.1415927f, 0.034906585f);
    etSpeed($A, 0.2f, 1.0f);
    etEx($A, 0, 2, 1, -999999, -999999.0f, -999999.0f);
    etEx($A, 0, 1048576, 0, -999999, -999999.0f, -999999.0f);
    etEx($A, 0, -2147483648, 200, -999999, -999999.0f, -999999.0f);
!E
    1.4f;
!N
    1.4f;
!H
    1.4f;
!LO
    1.8f;
!*
    etEx($A, 0, 2097152, 120, -999999, [-1.0f], -999999.0f);
    %I = _f(0);
    etOffsetAbs($A, %C, %D);
    diffI($J, 16, 16, 16, 18);
    goto BossCard3_at5_1036 @ 0;
BossCard3_at5_576:
    diffI($K, 8, 8, 8, 8);
    goto BossCard3_at5_916 @ 0;
BossCard3_at5_636:
    etAngle($A, 1.5707964f + (%RANDF2 * 6.2831855f), 0.0f);
    etOffsetRad($A, %F + (%RANDF2 * 1.5707964f), %I);
    etOn($A);
    wait(1);
BossCard3_at5_916:
    if ($K--) goto BossCard3_at5_636 @ 0;
    %I = %I + %E;
BossCard3_at5_1036:
    if ($J--) goto BossCard3_at5_576 @ 0;
    return;
}

void BossCardAlt4()
{
    var A, B, C;
    unless ($TIMEOUT == 0) goto BossCard4_160 @ 0;
    etCancel(640.0f);
    goto BossCard4_180 @ 0;
BossCard4_160:
    etClear(640.0f);
BossCard4_180:
+2: //2
    setChapter(65);
+2: //4
    ins_569(1);
    @BossItemCard();
    timerReset();
    killAllAsync();
    enmKillAll();
    unless ($TIMEOUT == 0) goto BossCard4_428 @ 4;
    etCancel(640.0f);
    goto BossCard4_448 @ 4;
BossCard4_428:
    etClear(640.0f);
BossCard4_448:
    spellEnd();
    funcSet(0);
    reset();
    playSound(27);
    moveVel(0.0f, 0.0f);
    moveVelTime(0, 0, 0.0f, 0.0f);
    movePosTime(0, 0, 0.0f, 0.0f);
    $MISS_COUNT = 0;
    $BOMB_COUNT = 0;
    $CAPTURE = 1;
    setNext(0, 0, 3000, "BossAlt5");
    spell(90, 3000, 500000, "Signe Gras â€Kouign-Amannâ€");
    movePosTime(60, 4, 0.0f, 128.0f);
    moveLimit(0.0f, 128.0f, 240.0f, 64.0f);
    anm316(0, 0);
    anmPlay(1, 73);
+90: //94
    nop();
	BossCardalt4_at() async;
	BossCardalt4_2();
    return;
}
void BossCardalt4_at() {
	etNew(0);
	etAim(0, 3);
	etSprite(0, 11,13);
	etCount(0, 3, 2);
	etSpeed(0, 3f, 5f);
	etExSet(0, 0, 0, EX_WAIT, 10, NEG, NEGF, NEGF);
	etExSet(0, 1, 0, EX_SETSPRITE, 32, 3, NEGF, NEGF);
	etNew(1);
	etAim(1, 3);
	etSprite(1, 11,13);
	etCount(1, 3, 2);
	etSpeed(1, 3f, 5f);
	etExSet(1, 0, 0, EX_WAIT, 10, NEG, NEGF, NEGF);
	etExSet(1, 1, 0, EX_SETSPRITE, 33, 6, NEGF, NEGF);
	
	while(1) {
	float speed = 3f+ RANDF*2f;
	float speednew = (RANDF * 3f) + 2f;
	float angle = RANDRAD;
	float angle2 = RANDRAD;
	etSpeed(0, 3f, speed);
	etSpeed(1, 3f, speed);
	etAngle(0, angle, angle2);
	etExSet(0, 2, 0, EX_VEL, NEG, NEG, NEGF, speednew );
	etAngle(1, angle, angle2);
	etExSet(1, 2, 0, EX_VEL, NEG, NEG, NEGF, speednew );
	etOn(0);
	etOn(1);
	
!E
	wait(15);
!N 
	wait(10);
!HL
	wait(7);
!*
	}
	
}
void BossCardalt4_2() {
	etNew(2);
	etAim(2,3);
	etSprite(2, 12 , 7);
	etSpeed(2, 3f , 3f);
	etCount(2, 20, 1);
	
	while(1) {
		etAngle(2, RANDRAD, RANDRAD);
		etOn(2);
		wait(50);
	}
}
void BossCardAlt1()
{
    var A, B, C, D;
    unless ($TIMEOUT == 0) goto BossCard5_160 @ 0;
    etCancel(640.0f);
    goto BossCard5_180 @ 0;
BossCard5_160:
    etClear(640.0f);
BossCard5_180:
+2: //2
    setChapter(66);
+2: //4
    ins_569(1);
    @BossItemCard();
    timerReset();
    killAllAsync();
    enmKillAll();
    unless ($TIMEOUT == 0) goto BossCard5_428 @ 4;
    etCancel(640.0f);
    goto BossCard5_448 @ 4;
BossCard5_428:
    etClear(640.0f);
BossCard5_448:
    spellEnd();
    funcSet(0);
    reset();
    playSound(27);
    moveVel(0.0f, 0.0f);
    moveVelTime(0, 0, 0.0f, 0.0f);
    movePosTime(0, 0, 0.0f, 0.0f);
    $MISS_COUNT = 0;
    $BOMB_COUNT = 0;
    $CAPTURE = 1;
    setNext(0, 0, 3600, "BossAlt2");
!EN
    spell(78, 3600, 500000, "v");
!H
    spell(78, 3600, 500000, "v");
!L
    spell(78, 3600, 500000, "v");
!*
	movePosTime(90, 0, 0f, 84f);
    moveLimitReset();
    anm316(0, 0);
    anmPlay(1, 79);
    anmPlay(1, 75);
    playSound(54);
+120: //94
    nop();
	BossCardAlt1_at();
    wait(10000);
}

void BossCardAlt1_at()
{
	while(1){
		Mer();
		wait(60);
		PushPlayer();
		wait(60);
		//ClearBullets();
		wait(20);
	}
}

void Mer(){
	float x = -192f-19f/4f;
	float y = 460f;
	I0 = 3;
	int A = 0;
	times(23){
		if(A%2 == 0){
			playSound(SE_CHARGE4);
			anmPlayPos(1,75, x, 448f, 0f);
		}
		x+= 25f:24f:23f:23f;
		A += 1;
	}
	x = -192f-19f/4f;
	wait(30);
	playSound(6);
	times(23){
		enmCreateA("MerLignes", x, y, 100, 10, 0);
		I0 = 3+I0%2;
		x+= 25f:24f:23f:23f;
	}
	wait(600);
}

void MerLignes(){
	flagSet(3);
	etNew(0);
	etAim(0, 1);
	etAngle(0, rad(-90), 0f);
	etCount(0, 1, 1);
	etSpeed(0, 1.5f, 1.5f);

	etExSet(0, 0, 0, EX_INVULN, 99999, NEG, NEGF, NEGF);
	etExSet(0, 1, 0, EX_HITBOX, NEG, NEG, 0.85, NEGF);
	etExSet(0, 2, 0, EX_WAIT, 90, NEG, NEGF, NEGF);
	etExSet(0, 3, 0, EX_SPECIAL, NEG, NEG, NEGF, NEGF);
	etExSub(0, 3, "Sel");
	//etExSet(0, 4, 0, EX_WAIT, 120, NEG, NEGF, NEGF);
	//etExSet(0, 5, 0, EX_DELETE, 0, NEG, NEGF, NEGF);
	etSprite(0, 20, I0);
	etSound(0, -1, -1);
	times(24){
		int time = 30+RAND%(90:110:120:130);
		//int time_disappear = 180-time;
		etExSet(0, 2, 0, EX_WAIT, time, NEG, NEGF, NEGF);
		//etExSet(0, 4, 0, EX_WAIT, time_disappear, NEG, NEGF, NEGF);
		etOn(0);
		wait(17);
	}
}

void Sel(){
	flagSet(3);
	etNew(0);
	etAim(0, 1);
	etAngle(0, RANDRAD, 0f);
	etSprite(0, 0, 15);
	etSpeed(0, 0f, 0f);
	etCount(0, 1, 1);
	etEx(0, 0, EX_ANIM, 1, NEG, NEGF, NEGF);
	etEx(0, 0, EX_WAIT, 120, NEG, NEGF, NEGF);
	etEx(0, 0, EX_VELTIME, 120, 0, 0.5f+RANDF*0.5f, NEGF);
	etOffset(0, RANDF2*5f, RANDF2*5f);
	etProtectRange(5f);
	wait(120);
	etOn(0);
}

void PushPlayer(){
	etNew(1);
	etAim(1, 2);
	etCount(1, 26:30:33:36, 1);
	etAngle(1, 0f, 0f);
	etSprite(1, 18, 0);
	etSpeed(1, 1f, 1f);
	etOn(1);
	wait(200);
}

void ClearBullets(){
	etClearAll();
}

void BossCardAlt6()
{
    var A, B, C;
    flagSet(3);
    unless ($TIMEOUT == 0) goto BossCard6_180 @ 0;
    etCancel(640.0f);
    goto BossCard6_200 @ 0;
BossCard6_180:
    etClear(640.0f);
BossCard6_200:
+2: //2
    setChapter(67);
+2: //4
    ins_569(1);
    stars(0);
    @BossItemCard();
    timerReset();
    killAllAsync();
    enmKillAll();
    unless ($TIMEOUT == 0) goto BossCard6_468 @ 4;
    etCancel(640.0f);
    goto BossCard6_488 @ 4;
BossCard6_468:
    etClear(640.0f);
BossCard6_488:
    spellEnd();
    funcSet(0);
    reset();
    playSound(27);
    moveVel(0.0f, 0.0f);
    moveVelTime(0, 0, 0.0f, 0.0f);
    movePosTime(0, 0, 0.0f, 0.0f);
    $MISS_COUNT = 0;
    $BOMB_COUNT = 0;
    $CAPTURE = 1;
    setNext(0, 0, 1800, "BossAlt7");
!EN
    spell(98, 1800, 500000, "uˆì‚êo‚éàêâqv");
!H
    spell(98, 1800, 500000, "uˆì‚êo‚éàêâqv");
!L
    spell(98, 1800, 500000, "u’nãâq‚Ìƒ‰»v");
!*
    spellTimeout();
    movePosTime(60, 4, 0.0f, 192.0f);
    moveLimitReset();
    anm316(0, 0);
    anmAlpha(0, 128);
    anmPlay(1, 79);
    anmPlay(1, 75);
    playSound(54);
+90: //94
    nop();
    $A = 120;
    %B = _f(100);
    %F0 = 1.0f;
    floatTime(0, %B, 1800, 0, 120.0f, 50.0f);
    $C = 10000;
    goto BossCard6_1556 @ 94;
BossCard6_1384:
    %F1 = %RANDRAD;
    @BossCardAlt6_at();
!L
    @BossCardAlt6_ath();
!*
    $A = _S(%B);
    wait($A);
BossCard6_1556:
    if ($C--) goto BossCard6_1384 @ 94;
    goto BossCard6_1644 @ 94;
BossCard6_1624:
    wait(1000);
BossCard6_1644:
    if (1) goto BossCard6_1624 @ 94;
    return;
}

void BossCardAlt6_at()
{
    etNew(0);
    etAim(0, 3);
    etSprite(0, 5, 2);
!E
    10;
!N
    22;
!H
    26;
!LO
    22;
!*
    etCount(0, [-1], 1);
    etAngle(0, %F1, 0.0f);
    etSpeed(0, 1.5f, 0.2f);
    etEx(0, 0, 2, 1, -999999, -999999.0f, -999999.0f);
    etEx(0, 0, 256, 200, 0, -999999.0f, -999999.0f);
    etEx2(0, 0, 16, 60, 1, 1, 0, 0.0f, 0.0f, -999999.0f, -999999.0f);
    etEx(0, 0, 4, 120, -999999, 0.02f, -999999.0f);
    etOffsetAbs(0, %PLAYER_X2, %PLAYER_Y2);
    etDist(0, 48.0f);
    etOn(0);
    return;
}

void BossCardAlt6_ath()
{
    etNew(0);
    etAim(0, 3);
    etSprite(0, 5, 6);
!E
    10;
!N
    22;
!H
    11;
!LO
    11;
!*
    etCount(0, [-1], 1);
    etAngle(0, %F1, 0.0f);
    etSpeed(0, 1.5f, 0.2f);
    etEx(0, 0, 2, 1, -999999, -999999.0f, -999999.0f);
    etEx(0, 0, 256, 200, 0, -999999.0f, -999999.0f);
    etEx(0, 0, -2147483648, 30, -999999, -999999.0f, -999999.0f);
    etEx2(0, 0, 16, 60, 1, 1, 0, 0.0f, 0.0f, -999999.0f, -999999.0f);
    etEx(0, 0, 4, 120, -999999, 0.04f, -999999.0f);
    etOffsetAbs(0, %PLAYER_X2, %PLAYER_Y2);
    etDist(0, 48.0f);
    etOn(0);
    return;
}

void BossCardAlt7()
{
    var A, B, C, D;
    unless ($TIMEOUT == 0) goto BossCard7_160 @ 0;
    etCancel(640.0f);
    goto BossCard7_180 @ 0;
BossCard7_160:
    etClear(640.0f);
BossCard7_180:
+2: //2
    setChapter(68);
+2: //4
    ins_569(1);
    stars(0);
    @BossItemCard();
    timerReset();
    killAllAsync();
    enmKillAll();
    unless ($TIMEOUT == 0) goto BossCard7_448 @ 4;
    etCancel(640.0f);
    goto BossCard7_468 @ 4;
BossCard7_448:
    etClear(640.0f);
BossCard7_468:
    spellEnd();
    funcSet(0);
    reset();
    playSound(27);
    moveVel(0.0f, 0.0f);
    moveVelTime(0, 0, 0.0f, 0.0f);
    movePosTime(0, 0, 0.0f, 0.0f);
    $MISS_COUNT = 0;
    $BOMB_COUNT = 0;
    $CAPTURE = 1;
    setNext(0, 0, 7200, "BossAltDead");
    spell(102, 7200, 500000, "7");
    lifeMarker(0, 5500.0f, -24448);
    lifeMarker(1, 3500.0f, -24448);
    lifeMarker(2, 1200.0f, -24448);
    movePosTime(60, 4, 0.0f, 128.0f);
    moveLimitReset();
    anm316(0, 0);
    anmPlay(1, 79);
    anmPlay(1, 75);
    playSound(54);
+90: //94
    nop();
    BossCardAlt7_at(0, 8, 0f, 1f) async;
	while ((LIFE > 5500) && (TIME <= (30 * 60))){
		wait(1);
	}
    playSound(27);
    etClear(640.0f);
	BossCardAlt7_at2_ring(1, -112f, 140f) async;
	BossCardAlt7_at2_ring(2, 112f, 140f) async;
	while ((LIFE > 3500) && (TIME <= (60 * 60))){
		wait(1);
	}
    etClear(640.0f);
	BossCardAlt7_at(3, 13, rad(90), -1f) async;
	while ((LIFE > 1200) && (TIME <= (90 * 60))){
		wait(1);
	}

    playSound(27);
	BossCardAlt7_at3(4, 4) async;
	wait(30);
	BossCardAlt7_at3(5, 6);
    while(1){
		wait(1000);
	}
    return;
}

void BossCardAlt7_at(int etId, int color, float angle, float sens)
{
	etNew(etId);//initializes etMgr 0
	etAim(etId, 3);
	etCount(etId, 10, 1);
	etSpeed(etId, 3f, 3f);
	etAngle(etId, angle, rad(10));
	etSprite(etId, 11, color);
	int n_bullets = 10;
	while(1){
		etAngle(etId, angle, rad(10));
		etCount(etId, n_bullets, 1);
		etOn(etId);
		n_bullets = (n_bullets+  10);
		if(n_bullets >= 40){
			n_bullets = 10;
		}
		angle+= rad(1.2)*sens;//rad(1.2) ou rad(10.2)
		wait(15);
	}
}

void BossCardAlt7_at2_ring(int etid, float x, float y)
{
    etNew(etid);
	etAim(etid, 3);
	etSprite(etid,0, 12);
	etSpeed(etid, 0.01f, 0.01f);
	etCount(etid, 10, 1);
	etEx(etid, 0, EX_ANIM, 1, NEG, NEGF, NEGF);
	etOffsetAbs(etid, x, y);
	etDist(etid, 70f);
	float angle = 0f;
	while(1){
		//times(10){
			etAngle(etid, RANDRAD, 0f);
			mathAngle(angle, x, y, PLAYER_X, PLAYER_Y);
			etExSet(etid, 1, 0, EX_VELTIME, 300, 1, 1.5f, RANDRAD);
			etOn(etid);
		//}
		wait(10);
	}
}


void BossCardAlt7_at3(int etid, int color)
{
	etNew(etid);
	etAim(etid, 5);
	etSprite(etid, 33, color);
	etSpeed(etid, 4f, 4f);
	etAngle(etid, rad(90), 0f);
	etCount(etid, 20, 1);
	while(1){
		etOn(etid);
		wait(60);
	}

}



void BossAltDead()
{
    flagSet(156);
    playSound(5);
    anmPlay(1, 63);
    moveVel(%RANDRAD, 0.4f);
    unless ($TIMEOUT == 0) goto BossDead_284 @ 0;
    enmCreate("Ecl_EtBreak2", 0.0f, 0.0f, 9999, 0, 0);
    goto BossDead_340 @ 0;
BossDead_284:
    enmCreate("Ecl_EtBreak2_ni", 0.0f, 0.0f, 9999, 0, 0);
BossDead_340:
    enmKillAll();
    unless ($SPELL_ID < 0) goto BossDead_456 @ 0;
    gameSpeed(0.5f);
BossDead_456:
+60: //60
    etClearAll();
    spellEnd();
    gameSpeed(1.0f);
    @BossItemPhase(0, 40, 64.0f);
    setScreenShake(30, 12, 0);
    anmPlay(1, 64);
    playSound(5);
    setBoss(-1);
    flagSet(32);
    unless ($SPELL_ID < 0) goto BossDead_820 @ 60;
    gameSpeed(0.25f);
    wait(30);
    gameSpeed(1.0f);
BossDead_820:
    delete();
    delete();
}

void BossEscape()
{
    spellEnd();
    moveLimitReset();
    enmKillAll();
    unless ($TIMEOUT == 0) goto BossEscape_208 @ 0;
    etCancel(640.0f);
    goto BossEscape_228 @ 0;
BossEscape_208:
    etClear(640.0f);
BossEscape_228:
    lifeSet(100000);
    setChapter(43);
    setBoss(-1);
    flagSet(16);
    movePosTime(60, 4, -224.0f, -16.0f);
    wait(60);
    delete();
    delete();
}
